#Мини-документация LunoScript#

LunoScript – это интерпретируемый язык программирования с динамической типизацией, предназначенный для встраивания в Android-приложения. Его синтаксис напоминает Kotlin и JavaScript.



#1. Переменные#

*Объявление:*

```Luno

var имяПеременной; // Объявление без инициализации (значение будет null)

var другаяПеременная = значение; // Объявление с инициализацией

```



*Присваивание:*

```Luno

имяПеременной = новоеЗначение;

```



*Составное присваивание:*

+=: Сложение с присваиванием (для чисел, строк, списков).

-=: Вычитание с присваиванием (для чисел).

*=: Умножение с присваиванием (для чисел; для строк/списков и числа - повторение).

/=: Деление с присваиванием (для чисел).

%=: Остаток от деления с присваиванием (для чисел).

```Luno

var x = 10;

x += 5; // x теперь 15



var s = "Hello";

s += " World"; // s теперь "Hello World"

```



*Область видимости:*

Лексическая (переменные видны внутри блока {...} или функции, где они объявлены, а также во вложенных блоках/функциях).



#2. Типы данных#

LunoScript имеет динамическую типизацию. Тип переменной определяется значением, которое ей присвоено.



*Number: Числа с плавающей точкой (внутренне Double).*

```Luno

var n1 = 10;

var n2 = 3.14;

var n3 = -5.0;

var n4 = 100/0; // Infinity

var n5 = 0/0;   // NaN (Not-a-Number)

```



*Строки, заключаются в двойные кавычки.*

```Luno

var message = "Привет, LunoScript!";

```



*Boolean: Логические значения true и false.*

```Luno

var isActive = true;

var isLoggedIn = false;

```



*Null: Специальное значение null, означающее отсутствие значения.*

var data = null;

```



*List: Упорядоченные, изменяемые коллекции значений (массивы).*

```Luno

var myList = [1, "текст", true, null, [10, 20]];

print(myList[1]); // Выведет: текст

myList[0] = 100;

myList += [30, 40]; // Конкатенация

```



*Object: Неупорядоченные, изменяемые коллекции пар "ключ-значение" (словари/карты). Ключи всегда строки. Используются также для экземпляров классов.*

```Luno

var myObject = {"name": "Luno", "version": 1.0, "stable": true};

print(myObject.name);       // Выведет: Luno

print(myObject["version"]); // Выведет: 1.0

myObject.author = "User";

myObject["newKey"] = 123;

```



*Function: Пользовательские функции.*

*Class: Пользовательские классы.*

*NativeObject: Объекты, переданные из Kotlin (например, Android Context).*

*NativeCallable: Нативные функции, доступные из Kotlin.*



#3. Операторы#

*Арифметические:*

+: Сложение (числа), конкатенация (строки, списки).

-: Вычитание (числа).

*: Умножение (числа), повторение (строка * число, список * число).

/: Деление (числа).

%: Остаток от деления (числа).



*Сравнения:*

==: Равно (сравнение по значению для примитивов и некоторых объектов).

!=: Не равно.

>: Больше.

>=: Больше или равно.

<: Меньше.

<=: Меньше или равно.



*Логические (с сокращенным вычислением):*

&&: Логическое И.

||: Логическое ИЛИ.



*Унарные:*

!: Логическое НЕ.

-: Унарный минус (для чисел).



#4. Управляющие конструкции#

*if-else:*

```Luno

if (условие) {

    // код если условие истинно

} else if (другоеУсловие) {

    // код если другоеУсловие истинно

} else {

    // код если все условия ложны

}

```



while цикл:

```Luno

var i = 0;

while (i < 5) {

    print(i);

    i = i + 1;

}

```



*for-in цикл (для списков и строк):*

```Luno

var items = ["a", "b", "c"];

for (item in items) {

    print(item); // Выведет "a", потом "b", потом "c"

}



for (char in "LUNO") {

    print(char); // Выведет "L", "U", "N", "O"

}

```



*switch: Позволяет выбрать один из нескольких блоков кода для выполнения.*

```Luno

var value = 2;

switch (value * 10) {

    case 10:

        print("Value is 10");

        break; // Выход из switch

    case 20:

        print("Value is 20");

        // Нет break, но LunoScript не проваливается автоматически

    case 30, 40: // Несколько значений для одного case

        print("Value is 30 or 40");

    default:

        print("Value is something else");

}

```



*break; немедленно выходит из switch. Если break нет, после выполнения блока case происходит выход из switch (нет "проваливания").*

*break; Прерывает выполнение текущего цикла (while, for) или switch.*

*continue; Переходит к следующей итерации текущего цикла (while, for).*



#5. Функции#

*Объявление пользовательских функций:*

```Luno

fun имяФункции(параметр1, параметр2) {

    // тело функции

    return параметр1 + параметр2;

}

```



*Вызов функций:*

```Luno

var результат = имяФункции(10, 20); // результат будет 30

```



return: Возвращает значение из функции. Если return не указан или return; без значения, функция возвращает null.



*Замыкания: Функции "помнят" окружение (переменные), в котором они были созданы.

Встроенные (нативные) функции: Предоставляются средой выполнения (см. раздел 7).*



#6. Классы (базовая реализация)#

*Объявление класса:*

```Luno

class ИмяКласса {

    // Конструктор (необязательный)

    fun init(начальноеЗначение) {

        this.свойство = начальноеЗначение;

        print("Экземпляр создан со значением: " + this.свойство);

    }



    // Метод

    fun имяМетода(параметр) {

        this.свойство = this.свойство + параметр;

        return this.свойство;

    }



    fun получитьСвойство() {

        return this.свойство;

    }

}

```



*Создание экземпляра:*

```Luno

var мойЭкземпляр = ИмяКласса(100); // Вызовется init(100)

```



*this: Внутри методов класса this ссылается на текущий экземпляр.*



*Доступ к свойствам и вызов методов:*

```Luno

мойЭкземпляр.имяМетода(50);

print(мойЭкземпляр.свойство);      // Доступ к свойству

print(мойЭкземпляр.получитьСвойство());



мойЭкземпляр.новоеСвойство = "динамично"; // Поля можно добавлять динамически

```



Наследование и super пока *не поддерживаются.*



#7. Встроенные нативные функции#



*GetAppContext()*

Аргументы: нет.

Возвращает: NativeObject, содержащий Android Context приложения.

Пример: var ctx = GetAppContext();



*MakeToast(сообщение)*

Аргументы:

сообщение (String): Текст для отображения.

Возвращает: Null.

Пример: MakeToast("Привет из LunoScript!");



*print(значение1, значение2, ...)*

Аргументы: одно или несколько значений любого типа.

Возвращает: Null.

Действие: Выводит строковое представление аргументов в LogCat Android с тегом "LunoScript".

Пример: print("Значение x:", x, "Статус:", status);



*len(коллекция)*

Аргументы:

коллекция (String, List или Object).

Возвращает: Number - длину строки, количество элементов в списке или количество полей в объекте.

Пример: var l = len("hello"); // l будет 5



*typeof(значение)*

Аргументы:

значение (любого типа).

Возвращает: String - имя типа значения ("Number", "String", "List", "Object", "Function", "Class", "Null", "Boolean", "NativeObject", "NativeCallable").

Пример: var t = typeof(123); // t будет "Number"



*parseInt(строка, [системаСчисления])*

Аргументы:

строка (String): Строка для преобразования в целое число.

системаСчисления (Number, опционально): Основание системы счисления (от 2 до 36). По умолчанию 10.

Возвращает: Number (распарсенное целое число) или Number(NaN), если преобразование не удалось.

Пример: var i = parseInt("101", 2); // i будет 5



*parseFloat(строка)*

Аргументы:

строка (String или другое значение, которое будет преобразовано в строку): Строка для преобразования в число с плавающей точкой.

Возвращает: Number (распарсенное число) или Number(NaN), если преобразование не удалось. Пытается имитировать поведение JavaScript parseFloat.

Пример: var f = parseFloat("3.14xyz"); // f будет 3.14



*isNaN(значение)*

Аргументы:

значение (любого типа).

Возвращает: Boolean - true, если значение является Number(NaN), иначе false.

Пример: var notANum = 0/0; print(isNaN(notANum)); // true



*isFinite(значение)*

Аргументы:

значение (любого типа).

Возвращает: Boolean - true, если значение является конечным числом (Number), иначе false.

Пример: print(isFinite(100/0)); // false (Infinity)



*currentTimeMillis()*

Аргументы: нет.

Возвращает: Number - текущее время в миллисекундах с начала эпохи Unix.



*sqrt(число)*: Квадратный корень.

*abs(число)*: Абсолютное значение (модуль).

*round(число)*: Округление до ближайшего целого.

*floor(число)*: Округление вниз (целая часть).

*ceil(число)*: Округление вверх.

*random()*: Случайное число от 0.0 (включительно) до 1.0 (исключительно).

*String(значение)*: Преобразует значение в String.

*Number(значение)*: Пытается преобразовать значение в Number.

*Boolean(значение)*: Преобразует значение в Boolean (по принципу "truthy"/"falsy").



#8. Комментарии#

Однострочные комментарии начинаются с //:

```Luno

// Это комментарий

var x = 10; // Это тоже комментарий

```



#9. Точка с запятой (;)#

Точка с запятой в конце большинства инструкций *является опциональной*, если инструкция занимает одну строку или если следующая инструкция начинается с новой строки. Однако, для ясности и избежания неоднозначностей *рекомендуется их использовать*.
